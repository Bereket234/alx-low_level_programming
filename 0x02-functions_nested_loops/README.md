nested while loop and functions
